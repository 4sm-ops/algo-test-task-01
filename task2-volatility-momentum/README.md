# Task 2: Volatility & Momentum Algorithm

## –û–ø–∏—Å–∞–Ω–∏–µ

–ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å—á—ë—Ç–∞ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ –º–æ–º–µ–Ω—Ç—É–º–∞ –¥–ª—è —Ñ—å—é—á–µ—Ä—Å–æ–≤ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ —Ä–æ–±–æ—Ç–∞ —Å –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å—é **400 –º—Å** –æ—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –º–∞—Ä–∫–µ—Ç–¥–∞—Ç—ã –¥–æ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∑–∞—è–≤–∫–∏.

## –ö–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–¥–∞—á–∏

> –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Ä–æ–±–æ—Ç–∞ –æ—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –º–∞—Ä–∫–µ—Ç–¥–∞—Ç—ã –¥–æ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∑–∞—è–≤–∫–∏ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 400 –º—Å. –î–ª—è –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∑–∞—è–≤–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –∏ –º–æ–º–µ–Ω—Ç—É–º.
>
> –ó–∞–¥–∞—á–∞: –ù–∞–ø–∏—Å–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –∏ –º–æ–º–µ–Ω—Ç—É–º –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ñ—å—é—á–µ—Ä—Å–æ–≤. –í—ã–≤–µ—Å—Ç–∏ –≥—Ä–∞—Ñ–∏–∫–∏ –º–æ–º–µ–Ω—Ç—É–º–∞ –∏ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏.

---

## –î–æ–ø—É—â–µ–Ω–∏—è –∏ —Ä–µ—à–µ–Ω–∏—è

| # | –í–æ–ø—Ä–æ—Å | –î–æ–ø—É—â–µ–Ω–∏–µ | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
|---|--------|-----------|-------------|
| 1 | –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö? | CSV `quotes_202512260854-GOLD.csv` | Tick-by-tick –∫–æ—Ç–∏—Ä–æ–≤–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ |
| 2 | –ö–∞–∫–∏–µ —Ñ—å—é—á–µ—Ä—Å—ã? | GLDG26 (B3), GOLD-3.26 (MOEX) | –û–±–∞ –≤ –¥–∞–Ω–Ω—ã—Ö, —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –±–∏—Ä–∂ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å–Ω–æ |
| 3 | –ú–µ—Ç–æ–¥ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏? | **Realized Vol + EWMA** | RV —Ç–æ—á–Ω–µ–µ –¥–ª—è HFT, EWMA –±—ã—Å—Ç—Ä–æ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è |
| 4 | –ú–µ—Ç–æ–¥ –º–æ–º–µ–Ω—Ç—É–º–∞? | **ROC + Simple Difference** | ROC –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω (%), —Ä–∞–∑–Ω–∏—Ü–∞ ‚Äî –≤ –ø—É–Ω–∫—Ç–∞—Ö |
| 5 | –û–∫–Ω–∞ —Ä–∞—Å—á—ë—Ç–∞? | **50 / 200 / 1000 —Ç–∏–∫–æ–≤** | Tick-based —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ –ø—Ä–∏ —Ä–∞–∑–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ |
| 6 | –ß—Ç–æ –∑–Ω–∞—á–∏—Ç 400 –º—Å? | –õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã, –ù–ï –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ —Ä–∞—Å—á—ë—Ç | –í—Å–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—á–∏—Ç–∞—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ |
| 7 | –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã? | Batch (–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ) | –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ |
| 8 | –§–æ—Ä–º–∞—Ç –≥—Ä–∞—Ñ–∏–∫–æ–≤? | Plotly HTML (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ) | –£–¥–æ–±–Ω–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ |

---

## –§–æ—Ä–º—É–ª—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤

### –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å

**1. Realized Volatility (RV)**

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –º–µ—Ä–∞ –¥–ª—è –≤—ã—Å–æ–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö ‚Äî —Å—É–º–º–∞ –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π:

```
returns[t] = ln(price[t] / price[t-1])
RV = sqrt(sum(returns[t-n:t]¬≤))
```

- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ: –Ω–µ —Ç—Ä–µ–±—É–µ—Ç OHLC, —Ä–∞–±–æ—Ç–∞–µ—Ç —Å tick-by-tick
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: –æ—Ü–µ–Ω–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏

**2. EWMA Volatility (Exponentially Weighted)**

–ú–æ–¥–µ–ª—å RiskMetrics —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º –∑–∞—Ç—É—Ö–∞–Ω–∏–µ–º:

```
œÉ¬≤[t] = Œª * œÉ¬≤[t-1] + (1-Œª) * return[t]¬≤
EWMA_vol = sqrt(œÉ¬≤[t])
```

- –ü–∞—Ä–∞–º–µ—Ç—Ä: Œª = 0.94 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç RiskMetrics)
- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ: –±—ã—Å—Ç—Ä–æ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∂–∏–º–æ–≤ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è 400 –º—Å —Ä–æ–±–æ—Ç–∞

### –ú–æ–º–µ–Ω—Ç—É–º

**1. Rate of Change (ROC)**

–ü—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã –∑–∞ n –ø–µ—Ä–∏–æ–¥–æ–≤:

```
ROC = (price[t] / price[t-n]) - 1
```

- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ: –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω, —Å—Ä–∞–≤–Ω–∏–º –º–µ–∂–¥—É –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–Ω–¥–∞

**2. Simple Momentum**

–ê–±—Å–æ–ª—é—Ç–Ω–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ —Ü–µ–Ω:

```
Momentum = price[t] - price[t-n]
```

- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ: –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–µ–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–≤–∏–∂–µ–Ω–∏–µ –≤ –ø—É–Ω–∫—Ç–∞—Ö
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: —Å–∏–≥–Ω–∞–ª—ã –¥–ª—è –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –≤ —Ç–æ—Ä–≥–æ–≤–ª–µ

### –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –¥–ª—è 400 –º—Å —Ä–æ–±–æ—Ç–∞

1. **–†–µ–∂–∏–º –≤—ã—Å–æ–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏** (EWMA > 95-–π –ø–µ—Ä—Å–µ–Ω—Ç–∏–ª—å):
   - –£–≤–µ–ª–∏—á–∏—Ç—å –ø–æ—Ä–æ–≥–∏ –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞
   - –£–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ —à–∏—Ä–æ–∫–∏–µ —Å—Ç–æ–ø—ã

2. **–†–µ–∂–∏–º –Ω–∏–∑–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏** (EWMA < –º–µ–¥–∏–∞–Ω—ã):
   - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
   - –ú–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É —Ç–æ—Ä–≥–æ–≤–ª–∏

### –ú–æ–º–µ–Ω—Ç—É–º –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

1. **–¢—Ä–µ–Ω–¥–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏** (–µ—Å–ª–∏ autocorr(ROC) > 0):
   - –ü–æ–∫—É–ø–∞—Ç—å –ø—Ä–∏ ROC > 0
   - –ü—Ä–æ–¥–∞–≤–∞—Ç—å –ø—Ä–∏ ROC < 0
   - –î–µ—Ä–∂–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é –ø–æ–∫–∞ —Ç—Ä–µ–Ω–¥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

2. **Mean-reversion** (–µ—Å–ª–∏ autocorr(ROC) < 0):
   - –ü—Ä–æ–¥–∞–≤–∞—Ç—å –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º ROC > 0
   - –ü–æ–∫—É–ø–∞—Ç—å –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º ROC < 0
   - –û–∂–∏–¥–∞—Ç—å –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ —Å—Ä–µ–¥–Ω–µ–º—É

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
task2-volatility-momentum/
‚îú‚îÄ‚îÄ config.py                    # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
‚îú‚îÄ‚îÄ main.py                      # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ requirements.txt             # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ README.md                    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ data_loader.py           # –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ volatility.py            # RV, EWMA –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ momentum.py              # ROC, Simple Momentum
‚îÇ   ‚îî‚îÄ‚îÄ visualization.py         # Plotly –≥—Ä–∞—Ñ–∏–∫–∏
‚îî‚îÄ‚îÄ output/
    ‚îú‚îÄ‚îÄ indicators_b3.html       # Dashboard B3 (GLDG26)
    ‚îú‚îÄ‚îÄ indicators_moex.html     # Dashboard MOEX (GOLD-3.26)
    ‚îú‚îÄ‚îÄ comparison.html          # –°—Ä–∞–≤–Ω–µ–Ω–∏–µ B3 vs MOEX
    ‚îî‚îÄ‚îÄ indicators_summary.md    # –¢–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç—á—ë—Ç
```

---

## –ó–∞–ø—É—Å–∫

```bash
cd task2-volatility-momentum
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
python main.py
```

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—è–≤—è—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `output/`.

---

## –°–ø–æ—Å–æ–±—ã —Å–∏–º—É–ª—è—Ü–∏–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### 1. –í–∏–∑—É–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–û—Ç–∫—Ä–æ–π—Ç–µ `output/indicators_b3.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ —Ä–∞—Å—Ç–∏ –ø—Ä–∏ —Ä–µ–∑–∫–∏—Ö –¥–≤–∏–∂–µ–Ω–∏—è—Ö —Ü–µ–Ω—ã
- –ú–æ–º–µ–Ω—Ç—É–º –ø–æ–ª–æ–∂–∏—Ç–µ–ª–µ–Ω –ø—Ä–∏ —Ä–æ—Å—Ç–µ, –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª–µ–Ω –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏

### 2. –ö–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑

–°—Ä–∞–≤–Ω–∏—Ç–µ B3 vs MOEX –≤ `output/comparison.html`:
- –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞—Ç—å (–æ–¥–∏–Ω underlying ‚Äî –∑–æ–ª–æ—Ç–æ)
- –ú–æ–º–µ–Ω—Ç—É–º –º–æ–∂–µ—Ç —Ä–∞—Å—Ö–æ–¥–∏—Ç—å—Å—è –∏–∑-–∑–∞ —Ä–∞–∑–Ω–æ–π –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏

### 3. –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

–í `output/indicators_summary.md` –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- **Autocorrelation ROC > 0** ‚Üí momentum persistence, –ø–æ–¥—Ö–æ–¥–∏—Ç trend-following
- **Autocorrelation ROC < 0** ‚Üí mean-reversion –¥–æ–º–∏–Ω–∏—Ä—É–µ—Ç
- **95th percentile –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏** ‚Üí –ø–æ—Ä–æ–≥ –¥–ª—è "–≤—ã—Å–æ–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏"

### 4. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤

- **RV vs EWMA**: EWMA –±–æ–ª–µ–µ –≥–ª–∞–¥–∫–∞—è, –±—ã—Å—Ç—Ä–µ–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç
- **ROC vs Simple Momentum**: ROC –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω, Simple –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è

### 5. –°–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ—Å—Ç–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±—ç–∫—Ç–µ—Å—Ç —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏:
```python
# –í—Ö–æ–¥
if momentum > threshold and volatility < max_vol:
    open_long()

# –í—ã—Ö–æ–¥
if momentum < 0 or volatility > stop_vol:
    close_position()
```

---

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- `pandas>=2.0.0` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- `numpy>=1.24.0` ‚Äî –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞
- `plotly>=5.18.0` ‚Äî –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏

---

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|----------|
| `vol_window_short` | 50 | –ö–æ—Ä–æ—Ç–∫–æ–µ –æ–∫–Ω–æ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ (—Ç–∏–∫–∏) |
| `vol_window_medium` | 200 | –°—Ä–µ–¥–Ω–µ–µ –æ–∫–Ω–æ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ |
| `vol_window_long` | 1000 | –î–ª–∏–Ω–Ω–æ–µ –æ–∫–Ω–æ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ |
| `ewma_lambda` | 0.94 | Decay factor –¥–ª—è EWMA (RiskMetrics) |
| `mom_window_short` | 50 | –ö–æ—Ä–æ—Ç–∫–æ–µ –æ–∫–Ω–æ –º–æ–º–µ–Ω—Ç—É–º–∞ |
| `mom_window_medium` | 200 | –°—Ä–µ–¥–Ω–µ–µ –æ–∫–Ω–æ –º–æ–º–µ–Ω—Ç—É–º–∞ |
| `mom_window_long` | 1000 | –î–ª–∏–Ω–Ω–æ–µ –æ–∫–Ω–æ –º–æ–º–µ–Ω—Ç—É–º–∞ |

---

## –í—ã—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `indicators_b3.html` | –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π dashboard –¥–ª—è B3 (GLDG26) |
| `indicators_moex.html` | –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π dashboard –¥–ª—è MOEX (GOLD-3.26) |
| `comparison.html` | –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ B3 vs MOEX |
| `indicators_summary.md` | Markdown-–æ—Ç—á—ë—Ç —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π |

---

## –î–∏–∞–≥—Ä–∞–º–º–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∞

### –û–±—â–∏–π pipeline —Ä–∞—Å—á—ë—Ç–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤

```mermaid
flowchart TD
    subgraph INPUT["üìä –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ"]
        CSV[(quotes.csv)] --> LOAD[–ó–∞–≥—Ä—É–∑–∫–∞ CSV]
        LOAD --> CLEAN[–û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö]
        CLEAN --> FILTER[–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è symbol]
    end

    subgraph PRICE["üí∞ –†–∞—Å—á—ë—Ç —Ü–µ–Ω—ã"]
        FILTER --> BID[bid_price]
        FILTER --> ASK[ask_price]
        BID --> MID["mid = (bid + ask) / 2"]
        ASK --> MID
    end

    subgraph RETURNS["üìà –î–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏"]
        MID --> LOG_RET["log_return = ln(mid[t] / mid[t-1])"]
        LOG_RET --> RET_SQ["returns¬≤ = log_return¬≤"]
    end

    subgraph VOLATILITY["üî• –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å"]
        RET_SQ --> RV_50["RV(50) = ‚àöŒ£returns¬≤"]
        RET_SQ --> RV_200["RV(200) = ‚àöŒ£returns¬≤"]
        RET_SQ --> RV_1000["RV(1000) = ‚àöŒ£returns¬≤"]
        RET_SQ --> EWMA["EWMA: œÉ¬≤[t] = ŒªœÉ¬≤[t-1] + (1-Œª)r¬≤[t]"]
    end

    subgraph MOMENTUM["üöÄ –ú–æ–º–µ–Ω—Ç—É–º"]
        MID --> ROC_50["ROC(50) = price[t]/price[t-50] - 1"]
        MID --> ROC_200["ROC(200) = price[t]/price[t-200] - 1"]
        MID --> ROC_1000["ROC(1000) = price[t]/price[t-1000] - 1"]
        MID --> MOM_50["Mom(50) = price[t] - price[t-50]"]
        MID --> MOM_200["Mom(200) = price[t] - price[t-200]"]
        MID --> MOM_1000["Mom(1000) = price[t] - price[t-1000]"]
    end

    subgraph OUTPUT["üìä –í—ã—Ö–æ–¥"]
        RV_50 --> DASHBOARD[Dashboard HTML]
        RV_200 --> DASHBOARD
        RV_1000 --> DASHBOARD
        EWMA --> DASHBOARD
        ROC_50 --> DASHBOARD
        ROC_200 --> DASHBOARD
        ROC_1000 --> DASHBOARD
        MOM_50 --> DASHBOARD
        MOM_200 --> DASHBOARD
        MOM_1000 --> DASHBOARD
        DASHBOARD --> SUMMARY[Summary Report]
    end

    style RV_50 fill:#ffcccc
    style RV_200 fill:#ffcccc
    style RV_1000 fill:#ffcccc
    style EWMA fill:#ffcccc
    style ROC_50 fill:#ccffcc
    style ROC_200 fill:#ccffcc
    style ROC_1000 fill:#ccffcc
    style MOM_50 fill:#cceeff
    style MOM_200 fill:#cceeff
    style MOM_1000 fill:#cceeff
```

### –†–∞—Å—á—ë—Ç –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ (–¥–µ—Ç–∞–ª—å–Ω–æ)

```mermaid
flowchart LR
    subgraph RV["Realized Volatility"]
        direction TB
        R1[returns] --> R2["returns¬≤"]
        R2 --> R3["rolling_sum(N)"]
        R3 --> R4["‚àösum"]
        R4 --> RV_OUT[RV]
    end

    subgraph EWMA_CALC["EWMA Volatility"]
        direction TB
        E1[returns¬≤] --> E2["ewm(Œª=0.94)"]
        E2 --> E3["‚àövariance"]
        E3 --> EWMA_OUT[EWMA]
    end

    RV_OUT --> COMPARE{–°—Ä–∞–≤–Ω–µ–Ω–∏–µ}
    EWMA_OUT --> COMPARE
    COMPARE --> INSIGHT["EWMA –±–æ–ª–µ–µ –≥–ª–∞–¥–∫–∞—è,<br/>–±—ã—Å—Ç—Ä–µ–µ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è"]
```

### –†–∞—Å—á—ë—Ç –º–æ–º–µ–Ω—Ç—É–º–∞ (–¥–µ—Ç–∞–ª—å–Ω–æ)

```mermaid
flowchart LR
    subgraph ROC_CALC["Rate of Change (%)"]
        direction TB
        P1[price] --> P2["price.shift(N)"]
        P1 --> DIV["price / shifted"]
        P2 --> DIV
        DIV --> SUB["- 1"]
        SUB --> ROC_OUT["ROC (%)"]
    end

    subgraph MOM_CALC["Simple Momentum (pts)"]
        direction TB
        M1[price] --> M2["price.shift(N)"]
        M1 --> DIFF["price - shifted"]
        M2 --> DIFF
        DIFF --> MOM_OUT["Momentum (pts)"]
    end

    ROC_OUT --> INTERPRET{–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è}
    MOM_OUT --> INTERPRET
    INTERPRET --> |"ROC > 0"| BULLISH["üü¢ –ë—ã—á–∏–π —Ç—Ä–µ–Ω–¥"]
    INTERPRET --> |"ROC < 0"| BEARISH["üî¥ –ú–µ–¥–≤–µ–∂–∏–π —Ç—Ä–µ–Ω–¥"]
    INTERPRET --> |"ROC ‚âà 0"| FLAT["‚ö™ –§–ª—ç—Ç"]
```

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤ —Ç–æ—Ä–≥–æ–≤–æ–º —Ä–æ–±–æ—Ç–µ (400 –º—Å)

```mermaid
stateDiagram-v2
    [*] --> IDLE: –°—Ç–∞—Ä—Ç

    IDLE --> CHECK_VOL: –ù–æ–≤—ã–π —Ç–∏–∫

    CHECK_VOL --> HIGH_VOL: EWMA > 95th percentile
    CHECK_VOL --> NORMAL_VOL: EWMA –≤ –Ω–æ—Ä–º–µ

    HIGH_VOL --> REDUCE_SIZE: –£–º–µ–Ω—å—à–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é
    REDUCE_SIZE --> CHECK_MOM

    NORMAL_VOL --> CHECK_MOM: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–∞–∑–º–µ—Ä

    CHECK_MOM --> LONG: ROC > threshold
    CHECK_MOM --> SHORT: ROC < -threshold
    CHECK_MOM --> IDLE: |ROC| < threshold

    LONG --> EXECUTE: –í—ã—Å—Ç–∞–≤–∏—Ç—å BUY
    SHORT --> EXECUTE: –í—ã—Å—Ç–∞–≤–∏—Ç—å SELL

    EXECUTE --> IDLE: –û—Ä–¥–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω (< 400 –º—Å)

    note right of HIGH_VOL
        –í—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å:
        - –£–≤–µ–ª–∏—á–∏—Ç—å –ø–æ—Ä–æ–≥–∏
        - –£–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä
        - –®–∏—Ä–µ —Å—Ç–æ–ø—ã
    end note

    note right of CHECK_MOM
        Autocorr > 0: trend-following
        Autocorr < 0: mean-reversion
    end note
```

---

## –°—Å—ã–ª–∫–∏

- [RiskMetrics EWMA](https://www.msci.com/documents/10199/5915b101-4206-4ba0-aee2-3449d5c7e95a) ‚Äî –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ EWMA
- [Realized Volatility](https://en.wikipedia.org/wiki/Realized_variance) ‚Äî —Ç–µ–æ—Ä–∏—è RV
